# Embeddings Pipeline

–ü–∞–π–ø–ª–∞–π–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏–∑ markdown –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º OpenAI –∏ sqlite-vec.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÇÔ∏è **Semantic Chunking** - —Ä–∞–∑–±–∏–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞–Ω–∫–∏ (500 —Å–∏–º–≤–æ–ª–æ–≤, overlap 15%)
- ü§ñ **OpenAI Embeddings** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ `text-embedding-3-small`
- üíæ **SQLite-Vec** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ SQLite —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º
- üìä **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –¥–µ—Ç–∞–ª—å–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```
OPENAI_API_KEY=your_openai_api_key_here
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
npm start <–ø—É—Ç—å_–∫_—Ñ–∞–π–ª—É>
```

–ü—Ä–∏–º–µ—Ä:

```bash
npm start ./test-document.md
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞** - —á–∏—Ç–∞–µ—Ç .md —Ñ–∞–π–ª –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
2. **Chunking** - —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —á–∞–Ω–∫–∏ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º
3. **Embeddings** - –ø–æ–ª—É—á–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ OpenAI API
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∞–Ω–∫–∏ –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ –≤ SQLite —Å sqlite-vec
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ index.js                  # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ embeddings.js        # –†–∞–±–æ—Ç–∞ —Å OpenAI API
‚îÇ   ‚îî‚îÄ‚îÄ vectorStore.js       # –†–∞–±–æ—Ç–∞ —Å sqlite-vec
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ chunker.js           # Semantic chunking
‚îÇ   ‚îî‚îÄ‚îÄ logger.js            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ embeddings.db            # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ test-document.md         # –¢–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:

- `documents` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
- `chunks` - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —á–∞–Ω–∫–∏
- `vec_chunks` - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ sqlite-vec)

